<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vehicle Diagnostic Pipeline v3.1</title>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { margin: 0; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    const Arrow = () => (
      <div className="flex justify-center py-2">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#60a5fa" strokeWidth="2">
          <path d="M12 5v14M5 12l7 7 7-7"/>
        </svg>
      </div>
    );

    const ExpandIcon = ({ expanded }) => (
      <svg 
        width="16" 
        height="16" 
        viewBox="0 0 24 24" 
        fill="none" 
        stroke="currentColor" 
        strokeWidth="2"
        className={`transition-transform duration-200 ${expanded ? 'rotate-180' : ''}`}
      >
        <path d="M6 9l6 6 6-6"/>
      </svg>
    );

    const Stage = ({ number, title, type, children, details, defaultExpanded = false }) => {
      const [expanded, setExpanded] = useState(defaultExpanded);
      
      const borderColor = type ? {
        neural: 'border-purple-500',
        symbolic: 'border-green-500',
        hybrid: 'border-blue-500',
      }[type] : 'border-slate-600';
      
      const typeBadge = type ? {
        neural: { text: 'Neural', color: 'bg-purple-500/20 text-purple-300' },
        symbolic: { text: 'Symbolic', color: 'bg-green-500/20 text-green-300' },
        hybrid: { text: 'Hybrid', color: 'bg-blue-500/20 text-blue-300' },
      }[type] : null;

      return (
        <div className={`bg-slate-900/50 rounded-xl border-2 ${borderColor} overflow-hidden`}>
          <div className="p-4">
            <div className="flex items-center justify-between mb-3">
              <div className="flex items-center gap-2">
                <span className="bg-slate-700 text-slate-300 text-xs font-bold px-2 py-0.5 rounded">{number}</span>
                <span className="text-blue-400 text-sm font-semibold uppercase tracking-wide">{title}</span>
              </div>
              <div className="flex items-center gap-2">
                {typeBadge && (
                  <span className={`text-xs px-2 py-0.5 rounded ${typeBadge.color}`}>{typeBadge.text}</span>
                )}
              </div>
            </div>
            {children}
          </div>
          
          {details && (
            <>
              <button
                onClick={() => setExpanded(!expanded)}
                className="w-full px-4 py-2 bg-slate-800/50 border-t border-slate-700 flex items-center justify-between text-xs text-slate-400 hover:bg-slate-800 transition"
              >
                <span>Technical Details</span>
                <ExpandIcon expanded={expanded} />
              </button>
              
              {expanded && (
                <div className="px-4 py-3 bg-slate-800/30 border-t border-slate-700">
                  {details}
                </div>
              )}
            </>
          )}
        </div>
      );
    };

    function Pipeline() {
      const [activeTab, setActiveTab] = useState('overview');

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-950 to-slate-900 p-6">
          <h1 className="text-2xl font-bold text-center mb-1 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
            Vehicle Diagnostic Pipeline v3.1
          </h1>
          <p className="text-center text-slate-500 text-sm mb-2">Neuro-Symbolic Architecture</p>
          <p className="text-center text-yellow-500/70 text-xs mb-4">Early Development</p>
          
          {/* Legend */}
          <div className="flex justify-center gap-4 mb-6 text-xs">
            <div className="flex items-center gap-1">
              <div className="w-3 h-3 rounded bg-purple-500"></div>
              <span className="text-slate-400">Neural</span>
            </div>
            <div className="flex items-center gap-1">
              <div className="w-3 h-3 rounded bg-green-500"></div>
              <span className="text-slate-400">Symbolic</span>
            </div>
            <div className="flex items-center gap-1">
              <div className="w-3 h-3 rounded bg-blue-500"></div>
              <span className="text-slate-400">Hybrid</span>
            </div>
          </div>

          {/* Tabs */}
          <div className="flex justify-center gap-2 mb-6">
            {['overview', 'output'].map(tab => (
              <button
                key={tab}
                onClick={() => setActiveTab(tab)}
                className={`px-4 py-1.5 rounded-lg text-sm font-medium transition ${
                  activeTab === tab 
                    ? 'bg-blue-500 text-white' 
                    : 'bg-slate-800 text-slate-400 hover:bg-slate-700'
                }`}
              >
                {tab.charAt(0).toUpperCase() + tab.slice(1)}
              </button>
            ))}
          </div>

          <div className="max-w-3xl mx-auto space-y-3">
            
            {activeTab === 'overview' && (
              <>
                {/* Stage 1: Inputs */}
                <Stage number="1" title="Inputs"
                  details={
                    <div className="space-y-3">
                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What audio duration/quality is sufficient for reliable diagnosis?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Which OBD-II PIDs are essential vs nice-to-have for N55?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How should we handle missing inputs (no OBD, no audio, etc.)?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Can phone microphone capture useful diagnostic audio, or need dedicated hardware?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="grid grid-cols-4 gap-2">
                    {[
                      { icon: 'üé§', title: 'Audio', sub: '30s @ 16kHz' },
                      { icon: 'üìä', title: 'OBD-II', sub: 'PIDs + DTCs' },
                      { icon: 'üí¨', title: 'User', sub: 'Symptom text' },
                      { icon: 'üöó', title: 'Vehicle', sub: 'N55 / 85k mi' },
                    ].map((item, i) => (
                      <div key={i} className="bg-slate-800 rounded-lg p-3 text-center">
                        <div className="text-xl mb-1">{item.icon}</div>
                        <div className="text-white text-xs font-semibold">{item.title}</div>
                        <div className="text-slate-500 text-xs">{item.sub}</div>
                      </div>
                    ))}
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 2: Evidence Extraction */}
                <Stage 
                  number="2" 
                  title="Evidence Extraction" 
                  type="hybrid"
                  details={
                    <div className="space-y-4">
                      <div className="grid grid-cols-2 gap-4">
                        <div className="bg-purple-900/20 border border-purple-500/30 rounded-lg p-3">
                          <div className="text-purple-400 text-xs font-semibold mb-2">üß† Foundation Model (Neural)</div>
                          <div className="text-xs text-slate-300 space-y-2">
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Purpose:</div>
                              <div>Semantic audio understanding</div>
                              <div className="text-slate-500">"What does this sound like?"</div>
                            </div>
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Candidates:</div>
                              <div className="space-y-1">
                                <div><span className="text-purple-300">CLAP</span> - Audio-text similarity</div>
                                <div><span className="text-purple-300">PANNs</span> - AudioSet classifier</div>
                                <div><span className="text-purple-300">BEATs</span> - Audio embeddings</div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                          <div className="text-green-400 text-xs font-semibold mb-2">üìà Signal Analysis (Symbolic)</div>
                          <div className="text-xs text-slate-300 space-y-2">
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Purpose:</div>
                              <div>Physics-based validation</div>
                              <div className="text-slate-500">"Is this from the engine?"</div>
                            </div>
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Methods:</div>
                              <div className="space-y-1">
                                <div>FFT / Dominant frequency</div>
                                <div>RPM correlation</div>
                                <div>Onset detection</div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Why Both Are Needed:</div>
                        <div className="text-xs text-slate-300 space-y-1">
                          <div>‚Ä¢ <span className="text-purple-300">FM alone</span>: Might say "knock" but can't verify it's from engine</div>
                          <div>‚Ä¢ <span className="text-green-300">Signal alone</span>: Knows frequency, but can't distinguish fault types</div>
                          <div>‚Ä¢ <span className="text-blue-300">Combined</span>: "Sounds like rod knock AND correlates with crank speed"</div>
                        </div>
                      </div>

                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Can CLAP/PANNs extract meaningful features from vehicle sounds, or is it too domain-specific?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Do audio foundation models distinguish between rod knock vs lifter tick vs HPFP tick?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Zero-shot sufficient, or must we fine-tune on automotive audio?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How do embeddings cluster for different fault types? Clear separation or overlap?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Is RPM correlation alone enough to rule out non-engine sounds?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What if FM fails completely - can heuristics + LLM reasoning be a viable fallback?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="grid grid-cols-2 gap-3">
                    <div className="bg-slate-800 rounded-lg p-3 border border-purple-500/30">
                      <div className="text-purple-400 font-semibold text-xs mb-2">üß† Foundation Model</div>
                      <div className="bg-slate-900 rounded p-2 text-xs">
                        <div className="text-slate-300">Semantic Understanding</div>
                        <div className="mt-1 text-slate-500">
                          "What does this sound like?"<br/>
                          <span className="text-purple-300">‚Üí rod_knock: 72%</span>
                        </div>
                      </div>
                    </div>
                    <div className="bg-slate-800 rounded-lg p-3 border border-green-500/30">
                      <div className="text-green-400 font-semibold text-xs mb-2">üìà Signal Analysis</div>
                      <div className="bg-slate-900 rounded p-2 text-xs">
                        <div className="text-slate-300">Physics Validation</div>
                        <div className="mt-1 text-slate-500">
                          "Is this from the engine?"<br/>
                          <span className="text-green-300">‚Üí crank_speed correlation</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 3: Hypothesis Generation */}
                <Stage 
                  number="3" 
                  title="Hypothesis Generation" 
                  type="symbolic"
                  details={
                    <div className="space-y-4">
                      <div className="grid grid-cols-2 gap-4">
                        <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                          <div className="text-green-400 text-xs font-semibold mb-2">üìö Fault Knowledge Base</div>
                          <div className="text-xs text-slate-300 space-y-2">
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">What it contains:</div>
                              <div className="space-y-1 text-slate-500">
                                <div>‚Ä¢ Known fault types for target platforms</div>
                                <div>‚Ä¢ Evidence patterns for each fault</div>
                                <div>‚Ä¢ Causal relationships between faults</div>
                                <div>‚Ä¢ Platform-specific information</div>
                              </div>
                            </div>
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Key principle:</div>
                              <div className="text-slate-500">Closed world - only diagnose known faults</div>
                            </div>
                          </div>
                        </div>

                        <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                          <div className="text-green-400 text-xs font-semibold mb-2">üîç Candidate Selection</div>
                          <div className="text-xs text-slate-300 space-y-2">
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">What it does:</div>
                              <div className="space-y-1 text-slate-500">
                                <div>‚Ä¢ Match evidence to potential faults</div>
                                <div>‚Ä¢ Find faults that could explain symptoms</div>
                                <div>‚Ä¢ Trace to possible root causes</div>
                              </div>
                            </div>
                            <div className="bg-slate-900 rounded p-2">
                              <div className="text-slate-400 mb-1">Key principle:</div>
                              <div className="text-slate-500">Prefer root causes over symptoms</div>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Fault Entry Information</div>
                        <div className="grid grid-cols-2 gap-2 text-xs">
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Evidence Patterns</div>
                            <div className="text-slate-500 mt-1">Required, supporting, and contradicting evidence for each fault</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Causal Links</div>
                            <div className="text-slate-500 mt-1">What causes this fault, what this fault causes</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Platform Compatibility</div>
                            <div className="text-slate-500 mt-1">Which vehicles/engines this fault applies to</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Severity & Category</div>
                            <div className="text-slate-500 mt-1">How urgent, which system (engine, fuel, etc.)</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Root Cause Tracing</div>
                        <div className="text-xs text-slate-400 mb-3">Given evidence, trace backward to find root causes:</div>
                        
                        <div className="flex flex-col items-center gap-2">
                          <div className="text-xs text-slate-500 w-full text-center">Observed Symptoms</div>
                          <div className="flex gap-2">
                            <div className="bg-red-900/50 border border-red-500/50 rounded px-2 py-1 text-xs text-red-300">rod_knock</div>
                            <div className="bg-red-900/50 border border-red-500/50 rounded px-2 py-1 text-xs text-red-300">low_oil_pressure</div>
                          </div>
                          
                          <div className="text-slate-500">‚Üë caused by?</div>
                          
                          <div className="text-xs text-slate-500 w-full text-center">Intermediate Cause</div>
                          <div className="flex gap-2">
                            <div className="bg-yellow-900/50 border border-yellow-500/50 rounded px-2 py-1 text-xs text-yellow-300">bearing_wear</div>
                          </div>
                          
                          <div className="text-slate-500">‚Üë caused by?</div>
                          
                          <div className="text-xs text-slate-500 w-full text-center">Possible Root Causes (Candidates)</div>
                          <div className="flex gap-2 flex-wrap justify-center">
                            <div className="bg-green-900/50 border border-green-500/50 rounded px-2 py-1 text-xs text-green-300">oil_starvation</div>
                            <div className="bg-green-900/50 border border-green-500/50 rounded px-2 py-1 text-xs text-green-300">high_mileage_wear</div>
                            <div className="bg-green-900/50 border border-green-500/50 rounded px-2 py-1 text-xs text-green-300">over_revving</div>
                          </div>
                        </div>
                        
                        <div className="mt-3 text-xs text-slate-400 text-center">All root causes become candidate hypotheses for next stage</div>
                      </div>

                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Stage Output</div>
                        <div className="text-xs text-slate-300">
                          <div className="mb-2">Set of candidate fault hypotheses that:</div>
                          <div className="space-y-1 text-slate-500">
                            <div>‚Ä¢ Match some of the observed evidence</div>
                            <div>‚Ä¢ Are compatible with the vehicle platform</div>
                            <div>‚Ä¢ Include both direct matches and traced root causes</div>
                          </div>
                          <div className="mt-2 text-slate-400">‚Üí Passed to Stage 4 for deductive filtering</div>
                        </div>
                      </div>

                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What data structure best represents fault relationships? DAG, tree, or flat lookup?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How do we gather reliable causal chains for automotive faults?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Should knowledge base be hand-curated, LLM-generated, or extracted from repair manuals?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How deep should root cause tracing go? When to stop?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to handle faults not in the knowledge base (unknown unknowns)?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="bg-slate-800 rounded-lg p-3">
                    <div className="text-xs text-slate-400 mb-2">Root Cause Tracing</div>
                    <div className="flex items-center justify-center gap-2 text-xs flex-wrap">
                      <div className="bg-red-900/50 border border-red-500/50 rounded px-2 py-1 text-red-300">rod_knock</div>
                      <span className="text-slate-500">‚Üê</span>
                      <div className="bg-yellow-900/50 border border-yellow-500/50 rounded px-2 py-1 text-yellow-300">bearing_wear</div>
                      <span className="text-slate-500">‚Üê</span>
                      <div className="bg-green-900/50 border border-green-500/50 rounded px-2 py-1 text-green-300">oil_starvation</div>
                    </div>
                    <div className="text-center text-xs text-slate-500 mt-2">Symptom ‚Üí Intermediate ‚Üí ROOT CAUSE</div>
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 4: Deductive Filtering */}
                <Stage 
                  number="4" 
                  title="Deductive Filtering" 
                  type="symbolic"
                  details={
                    <div className="space-y-4">
                      <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Purpose</div>
                        <div className="text-xs text-slate-300">
                          Eliminate impossible hypotheses using hard rules that cannot be overridden by any other component (including LLM).
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Types of Hard Constraints</div>
                        <div className="grid grid-cols-2 gap-2 text-xs">
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Platform Constraints</div>
                            <div className="text-slate-500 mt-1">Faults that don't exist on this vehicle</div>
                            <div className="text-slate-600 mt-1 text-xs">e.g., N55 has timing chain, not belt</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Physics Constraints</div>
                            <div className="text-slate-500 mt-1">Evidence that must be present for a fault</div>
                            <div className="text-slate-600 mt-1 text-xs">e.g., Rod knock must correlate with crank speed</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Logical Constraints</div>
                            <div className="text-slate-500 mt-1">Mutually exclusive conditions</div>
                            <div className="text-slate-600 mt-1 text-xs">e.g., Can't be both lean and rich simultaneously</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Required Evidence</div>
                            <div className="text-slate-500 mt-1">Mandatory symptoms for certain faults</div>
                            <div className="text-slate-600 mt-1 text-xs">e.g., Vacuum leak requires lean condition</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Why Symbolic (Not Neural)?</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Deterministic:</span> Same input always gives same output</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Explainable:</span> Can show exactly why a hypothesis was rejected</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Reliable:</span> Won't hallucinate or make probabilistic errors</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Auditable:</span> Rules can be reviewed and verified by domain experts</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Filtering Process</div>
                        <div className="flex flex-col items-center gap-2 text-xs">
                          <div className="text-slate-400">Candidates from Stage 3</div>
                          <div className="flex gap-2 flex-wrap justify-center">
                            <div className="bg-slate-700 rounded px-2 py-1">rod_knock</div>
                            <div className="bg-slate-700 rounded px-2 py-1">main_bearing</div>
                            <div className="bg-slate-700 rounded px-2 py-1">lifter_tick</div>
                            <div className="bg-slate-700 rounded px-2 py-1">timing_belt</div>
                            <div className="bg-slate-700 rounded px-2 py-1">wrist_pin</div>
                          </div>
                          
                          <div className="text-slate-500 my-1">‚Üì Apply hard constraints</div>
                          
                          <div className="flex gap-4">
                            <div className="text-center">
                              <div className="text-red-400 text-xs mb-1">Rejected</div>
                              <div className="flex flex-col gap-1">
                                <div className="bg-red-900/30 border border-red-500/30 rounded px-2 py-1 text-red-300">
                                  <div>lifter_tick</div>
                                  <div className="text-red-400/60 text-xs">wrong RPM correlation</div>
                                </div>
                                <div className="bg-red-900/30 border border-red-500/30 rounded px-2 py-1 text-red-300">
                                  <div>timing_belt</div>
                                  <div className="text-red-400/60 text-xs">N55 uses chain</div>
                                </div>
                              </div>
                            </div>
                            <div className="text-center">
                              <div className="text-green-400 text-xs mb-1">Passed</div>
                              <div className="flex flex-col gap-1">
                                <div className="bg-green-900/30 border border-green-500/30 rounded px-2 py-1 text-green-300">rod_knock</div>
                                <div className="bg-green-900/30 border border-green-500/30 rounded px-2 py-1 text-green-300">main_bearing</div>
                                <div className="bg-green-900/30 border border-green-500/30 rounded px-2 py-1 text-green-300">wrist_pin</div>
                              </div>
                            </div>
                          </div>
                          
                          <div className="text-slate-500 mt-2">‚Üì To Stage 5 for ranking</div>
                        </div>
                      </div>

                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Stage Output</div>
                        <div className="text-xs text-slate-300">
                          <div className="mb-2">Filtered set of hypotheses that:</div>
                          <div className="space-y-1 text-slate-500">
                            <div>‚Ä¢ Pass all platform constraints</div>
                            <div>‚Ä¢ Pass all physics constraints</div>
                            <div>‚Ä¢ Have no logical contradictions</div>
                            <div>‚Ä¢ Have required evidence present</div>
                          </div>
                          <div className="mt-2 text-slate-400">‚Üí Passed to Stage 5 for abductive ranking</div>
                        </div>
                      </div>

                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How strict should physics constraints be? Allow tolerance or hard cutoff?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What if signal analysis is uncertain (noisy RPM correlation)?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to handle edge cases where constraints might incorrectly reject valid hypotheses?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Should LLM ever be able to override deductive rules with strong justification?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="bg-slate-800 rounded-lg p-3">
                    <div className="text-xs text-green-400 font-semibold mb-2">Hard Constraints (Cannot Override)</div>
                    <div className="grid grid-cols-2 gap-2 text-xs">
                      <div className="bg-red-900/30 border border-red-500/30 rounded p-2">
                        <span className="text-red-400">‚úó Lifter tick</span>
                        <div className="text-slate-500">Requires cam_speed</div>
                      </div>
                      <div className="bg-red-900/30 border border-red-500/30 rounded p-2">
                        <span className="text-red-400">‚úó Timing belt</span>
                        <div className="text-slate-500">N55 uses chain</div>
                      </div>
                    </div>
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 5: Abductive Ranking */}
                <Stage 
                  number="5" 
                  title="Abductive Ranking" 
                  type="hybrid"
                  details={
                    <div className="space-y-4">
                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">What is Abductive Reasoning?</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div>Given observed evidence, find the <span className="text-white">best explanation</span> among candidates.</div>
                          <div className="bg-slate-900 rounded p-2 mt-2">
                            <div className="text-slate-400">Unlike deduction (guaranteed) or induction (probable):</div>
                            <div className="text-slate-500 mt-1">Abduction finds the most <span className="text-blue-300">plausible</span> hypothesis that explains all evidence</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Ranking Criteria</div>
                        <div className="grid grid-cols-2 gap-2 text-xs">
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Evidence Coverage</div>
                            <div className="text-slate-500 mt-1">How much of the observed evidence does this hypothesis explain?</div>
                            <div className="text-slate-600 mt-1 text-xs">More coverage = higher rank</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Contradictions</div>
                            <div className="text-slate-500 mt-1">Does any evidence contradict this hypothesis?</div>
                            <div className="text-slate-600 mt-1 text-xs">Contradictions = lower rank</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Prior Probability</div>
                            <div className="text-slate-500 mt-1">How likely is this fault given vehicle context?</div>
                            <div className="text-slate-600 mt-1 text-xs">e.g., High mileage increases bearing failure probability</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-white font-semibold">Causal Depth</div>
                            <div className="text-slate-500 mt-1">Is this a root cause or just a symptom?</div>
                            <div className="text-slate-600 mt-1 text-xs">Root causes preferred over symptoms</div>
                          </div>
                        </div>
                      </div>

                      <div className="grid grid-cols-2 gap-4">
                        <div className="bg-purple-900/20 border border-purple-500/30 rounded-lg p-3">
                          <div className="text-purple-400 text-xs font-semibold mb-2">Neural Component</div>
                          <div className="text-xs text-slate-300 space-y-1">
                            <div>‚Ä¢ Interpret ambiguous evidence</div>
                            <div>‚Ä¢ Weigh multiple factors holistically</div>
                            <div>‚Ä¢ Handle natural language symptoms</div>
                            <div>‚Ä¢ Reason about "best explanation"</div>
                          </div>
                        </div>
                        <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                          <div className="text-green-400 text-xs font-semibold mb-2">Symbolic Component</div>
                          <div className="text-xs text-slate-300 space-y-1">
                            <div>‚Ä¢ Structured evidence matching</div>
                            <div>‚Ä¢ Consistent confidence calculation</div>
                            <div>‚Ä¢ Countable coverage metrics</div>
                            <div>‚Ä¢ Auditable scoring</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Ranking Example</div>
                        <div className="text-xs text-slate-400 mb-2">Given evidence: [metallic_knock, crank_speed_corr, worse_when_warm, normal_oil_pressure]</div>
                        <div className="space-y-2">
                          <div className="bg-blue-900/30 border border-blue-500/30 rounded p-2 flex justify-between items-center">
                            <div>
                              <span className="text-white font-semibold">rod_knock</span>
                              <span className="text-slate-500 ml-2">Coverage: 3/4, Contradictions: 1</span>
                            </div>
                            <span className="text-green-400 font-bold">Best match</span>
                          </div>
                          <div className="bg-slate-900 rounded p-2 flex justify-between items-center">
                            <div>
                              <span className="text-slate-300">main_bearing</span>
                              <span className="text-slate-500 ml-2">Coverage: 2/4, Contradictions: 1</span>
                            </div>
                            <span className="text-slate-500">Partial match</span>
                          </div>
                          <div className="bg-slate-900 rounded p-2 flex justify-between items-center">
                            <div>
                              <span className="text-slate-300">wrist_pin</span>
                              <span className="text-slate-500 ml-2">Coverage: 2/4, Contradictions: 2</span>
                            </div>
                            <span className="text-slate-500">Weak match</span>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Confidence Score</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div>Final confidence combines multiple factors into a single score (0-1):</div>
                          <div className="grid grid-cols-4 gap-2 mt-2">
                            <div className="bg-slate-900 rounded p-2 text-center">
                              <div className="text-slate-400">Coverage</div>
                              <div className="text-slate-500 text-xs">evidence match</div>
                            </div>
                            <div className="bg-slate-900 rounded p-2 text-center">
                              <div className="text-slate-400">Penalty</div>
                              <div className="text-slate-500 text-xs">contradictions</div>
                            </div>
                            <div className="bg-slate-900 rounded p-2 text-center">
                              <div className="text-slate-400">Prior</div>
                              <div className="text-slate-500 text-xs">vehicle context</div>
                            </div>
                            <div className="bg-slate-900 rounded p-2 text-center">
                              <div className="text-slate-400">Depth</div>
                              <div className="text-slate-500 text-xs">root cause bonus</div>
                            </div>
                          </div>
                          <div className="text-slate-500 mt-2">Note: Confidence capped below 100% - physical inspection always needed for certainty</div>
                        </div>
                      </div>

                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Stage Output</div>
                        <div className="text-xs text-slate-300">
                          <div className="mb-2">Ranked list of hypotheses with:</div>
                          <div className="space-y-1 text-slate-500">
                            <div>‚Ä¢ Confidence score for each</div>
                            <div>‚Ä¢ Supporting evidence cited</div>
                            <div>‚Ä¢ Contradicting evidence noted</div>
                            <div>‚Ä¢ Unexplained evidence flagged</div>
                          </div>
                          <div className="mt-2 text-slate-400">‚Üí Passed to Stage 6 for fallback handling</div>
                        </div>
                      </div>

                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to weight different evidence sources (audio vs OBD vs user report)?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Can LLM reliably perform abductive reasoning, or does it hallucinate explanations?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to calibrate confidence scores to match real-world accuracy?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What's the right balance between symbolic scoring and LLM judgment?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to handle ties or near-ties in confidence?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="bg-slate-800 rounded-lg p-3">
                    <div className="text-xs text-blue-400 font-semibold mb-2">ü§ñ LLM: "What explains ALL evidence?"</div>
                    <div className="space-y-1">
                      {[
                        { fault: 'Rod knock', coverage: '5/5', contra: '1', score: '0.72', top: true },
                        { fault: 'Main bearing', coverage: '4/5', contra: '1', score: '0.58', top: false },
                        { fault: 'Wrist pin', coverage: '3/5', contra: '2', score: '0.34', top: false },
                      ].map((h, i) => (
                        <div key={i} className={`flex items-center justify-between text-xs p-2 rounded ${h.top ? 'bg-blue-900/30 border border-blue-500/30' : 'bg-slate-900'}`}>
                          <span className={h.top ? 'text-white font-semibold' : 'text-slate-400'}>{h.fault}</span>
                          <div className="flex gap-3 text-slate-500">
                            <span>Cov: {h.coverage}</span>
                            <span>Contra: {h.contra}</span>
                            <span className={h.top ? 'text-green-400' : ''}>{h.score}</span>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 6: Hierarchical Fallback */}
                <Stage 
                  number="6" 
                  title="Hierarchical Fallback" 
                  type="symbolic"
                  details={
                    <div className="space-y-4">
                      <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Purpose</div>
                        <div className="text-xs text-slate-300">
                          Ensure the system <span className="text-white">always provides actionable output</span>, even when confidence is low. Never output raw "unknown" - instead, fall back to progressively broader categories.
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Fallback Hierarchy</div>
                        <div className="space-y-2 text-xs">
                          <div className="bg-green-900/30 border border-green-500/30 rounded p-2">
                            <div className="flex justify-between items-center">
                              <div>
                                <span className="text-green-400 font-semibold">Level 1: Specific Fault</span>
                                <div className="text-slate-500 mt-1">e.g., "rod_knock", "vacuum_leak"</div>
                              </div>
                              <span className="text-slate-500">High confidence</span>
                            </div>
                          </div>
                          <div className="bg-yellow-900/30 border border-yellow-500/30 rounded p-2">
                            <div className="flex justify-between items-center">
                              <div>
                                <span className="text-yellow-400 font-semibold">Level 2: Category</span>
                                <div className="text-slate-500 mt-1">e.g., "bottom_end_noise", "intake_leak"</div>
                              </div>
                              <span className="text-slate-500">Medium confidence</span>
                            </div>
                          </div>
                          <div className="bg-orange-900/30 border border-orange-500/30 rounded p-2">
                            <div className="flex justify-between items-center">
                              <div>
                                <span className="text-orange-400 font-semibold">Level 3: System</span>
                                <div className="text-slate-500 mt-1">e.g., "engine_internal", "fuel_system"</div>
                              </div>
                              <span className="text-slate-500">Low confidence</span>
                            </div>
                          </div>
                          <div className="bg-red-900/30 border border-red-500/30 rounded p-2">
                            <div className="flex justify-between items-center">
                              <div>
                                <span className="text-red-400 font-semibold">Level 4: Safe Fallback</span>
                                <div className="text-slate-500 mt-1">"Professional inspection recommended"</div>
                              </div>
                              <span className="text-slate-500">Very low / uncertain</span>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Why Hierarchical?</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Still useful:</span> Even "bottom_end_noise" tells user/mechanic where to look</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Honest uncertainty:</span> Admits when specific diagnosis isn't possible</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Safety:</span> Never confidently wrong - degrades gracefully</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-green-400">‚Ä¢</span>
                            <div><span className="text-white">Actionable:</span> Every level provides a next step for the user</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-slate-800 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">Example Scenarios</div>
                        <div className="space-y-2 text-xs">
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-slate-400">Scenario: Clear evidence, high confidence</div>
                            <div className="text-green-400 mt-1">‚Üí Level 1: "Rod bearing wear (72%)"</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-slate-400">Scenario: Ambiguous between rod knock / main bearing</div>
                            <div className="text-yellow-400 mt-1">‚Üí Level 2: "Bottom-end mechanical noise"</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-slate-400">Scenario: Clearly engine, but unclear where</div>
                            <div className="text-orange-400 mt-1">‚Üí Level 3: "Engine internal issue"</div>
                          </div>
                          <div className="bg-slate-900 rounded p-2">
                            <div className="text-slate-400">Scenario: Poor audio quality, conflicting evidence</div>
                            <div className="text-red-400 mt-1">‚Üí Level 4: "Professional inspection recommended"</div>
                          </div>
                        </div>
                      </div>

                      <div className="bg-blue-900/20 border border-blue-500/30 rounded-lg p-3">
                        <div className="text-blue-400 text-xs font-semibold mb-2">Stage Output</div>
                        <div className="text-xs text-slate-300">
                          <div className="mb-2">Final diagnosis with:</div>
                          <div className="space-y-1 text-slate-500">
                            <div>‚Ä¢ Diagnosis at appropriate specificity level</div>
                            <div>‚Ä¢ Confidence score</div>
                            <div>‚Ä¢ Indication of fallback level used</div>
                          </div>
                          <div className="mt-2 text-slate-400">‚Üí Passed to Stage 7 for output formatting</div>
                        </div>
                      </div>

                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What confidence thresholds trigger each fallback level?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Is category-level diagnosis actually useful to users/mechanics?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to communicate uncertainty without losing user trust?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Should we show multiple candidates at same level, or just top one?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="bg-slate-800 rounded-lg p-3">
                    <div className="flex items-center justify-between text-xs">
                      <div className="flex items-center gap-2">
                        <div className="bg-green-900/50 border border-green-500/50 rounded px-2 py-1">
                          rod_knock (0.72)
                        </div>
                      </div>
                      <div className="text-slate-500">
                        Fallbacks: bottom_end ‚Üí engine_internal ‚Üí mechanic
                      </div>
                    </div>
                  </div>
                </Stage>

                <Arrow />

                {/* Stage 7: Output */}
                <Stage number="7" title="Diagnosis Output" type="hybrid"
                  details={
                    <div className="space-y-3">
                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ùì Open Questions</div>
                        <div className="text-xs text-slate-300 space-y-2">
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What information is most actionable for end users vs mechanics?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>How to present contradicting evidence without confusing users?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>Should severity/urgency be system-determined or context-dependent?</div>
                          </div>
                          <div className="flex items-start gap-2">
                            <span className="text-yellow-500">‚Ä¢</span>
                            <div>What verification steps are realistic for non-mechanics to perform?</div>
                          </div>
                        </div>
                      </div>
                    </div>
                  }
                >
                  <div className="bg-gradient-to-r from-slate-800 to-slate-900 rounded-lg p-4 border border-blue-500">
                    <div className="flex justify-between items-center mb-3">
                      <div className="text-white font-bold">üîß Rod Bearing Wear</div>
                      <div className="bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full">72%</div>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-3 text-xs">
                      <div>
                        <div className="text-green-400 font-semibold mb-1">Supporting</div>
                        <div className="space-y-1 text-slate-300">
                          <div>‚úì Audio: rod_knock pattern</div>
                          <div>‚úì Crank speed correlation</div>
                          <div>‚úì Worse when warm</div>
                        </div>
                      </div>
                      <div>
                        <div className="text-yellow-400 font-semibold mb-1">Contradicting</div>
                        <div className="space-y-1 text-slate-300">
                          <div>‚ö† Oil pressure NORMAL</div>
                        </div>
                      </div>
                    </div>

                    <div className="mt-3 bg-yellow-900/30 border border-yellow-500/50 rounded p-2 text-xs">
                      <span className="text-yellow-400 font-semibold">Implication: </span>
                      <span className="text-yellow-200">Early-stage wear OR sensor fault</span>
                    </div>
                  </div>
                </Stage>
              </>
            )}

            {activeTab === 'output' && (
              <>
                {/* JSON Schema */}
                <Stage number="API" title="Output Schema">
                  <pre className="text-xs text-slate-300 bg-slate-800 rounded p-3 overflow-x-auto">
{`{
  "diagnosis": {
    "fault": "rod_knock",
    "level": "specific",
    "confidence": 0.72,
    "severity": "critical"
  },
  "evidence": {
    "supporting": [
      {"source": "audio_fm", "claim": "rod_knock pattern (72%)"},
      {"source": "signal", "claim": "crank_speed correlation"}
    ],
    "contradicting": [
      {"source": "obd", "claim": "Oil pressure normal"}
    ]
  },
  "action": {
    "urgency": "critical",
    "immediate": "Stop driving, check oil level",
    "verification": "Manual oil pressure test"
  }
}`}
                  </pre>
                </Stage>

                <Arrow />

                {/* User-Facing Display */}
                <Stage number="UI" title="User Display">
                  <div className="bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-5 border-2 border-blue-500">
                    <div className="flex justify-between items-start mb-4">
                      <div>
                        <div className="text-red-400 text-xs font-semibold uppercase">‚ö†Ô∏è Critical</div>
                        <div className="text-white text-xl font-bold mt-1">Rod Bearing Wear</div>
                      </div>
                      <div className="text-right">
                        <div className="text-slate-400 text-xs">Confidence</div>
                        <div className="text-3xl font-bold text-blue-400">72%</div>
                      </div>
                    </div>

                    <div className="grid grid-cols-2 gap-4 mb-4">
                      <div className="bg-green-900/20 border border-green-500/30 rounded-lg p-3">
                        <div className="text-green-400 text-xs font-semibold mb-2">‚úì Supporting</div>
                        <ul className="text-xs text-slate-300 space-y-1">
                          <li>‚Ä¢ Audio matches pattern</li>
                          <li>‚Ä¢ Sound tracks crankshaft</li>
                          <li>‚Ä¢ Worse when warm</li>
                        </ul>
                      </div>
                      <div className="bg-yellow-900/20 border border-yellow-500/30 rounded-lg p-3">
                        <div className="text-yellow-400 text-xs font-semibold mb-2">‚ö† Contradicting</div>
                        <ul className="text-xs text-slate-300 space-y-1">
                          <li>‚Ä¢ Oil pressure normal</li>
                        </ul>
                        <div className="text-xs text-slate-500 mt-1">Expected: low</div>
                      </div>
                    </div>

                    <div className="bg-red-900/30 border border-red-500/50 rounded-lg p-3 mb-3">
                      <div className="text-red-400 text-xs font-semibold">‚õî Immediate Action</div>
                      <div className="text-sm text-white font-semibold">Stop driving. Check oil level.</div>
                    </div>

                    <div className="bg-slate-800/50 rounded-lg p-3">
                      <div className="text-slate-400 text-xs font-semibold">Verification</div>
                      <div className="text-sm text-slate-300">Oil pressure test at idle when warm</div>
                      <div className="text-xs text-slate-500">&lt;15 PSI confirms bearing failure</div>
                    </div>
                  </div>
                </Stage>
              </>
            )}

            {/* Footer */}
            <div className="mt-6 pt-4 border-t border-slate-800">
              <div className="grid grid-cols-6 gap-2">
                {[
                  { icon: 'üß†', name: 'Audio FM', type: 'Neural' },
                  { icon: 'üìà', name: 'librosa', type: 'DSP' },
                  { icon: 'üîó', name: 'Knowledge', type: 'Faults' },
                  { icon: 'ü§ñ', name: 'LLM', type: 'Reasoning' },
                  { icon: '‚úì', name: 'Rules', type: 'Deductive' },
                  { icon: 'üìä', name: 'UQ', type: 'Confidence' },
                ].map((t, i) => (
                  <div key={i} className="bg-slate-800/50 rounded-lg p-2 text-center">
                    <div className="text-lg">{t.icon}</div>
                    <div className="text-xs text-white font-medium">{t.name}</div>
                    <div className="text-xs text-slate-500">{t.type}</div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<Pipeline />);
  </script>
</body>
</html>
